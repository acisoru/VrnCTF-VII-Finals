Задача представляет из себя модифицированный алгоритм сжатия хаффмана. Отличие от классического алгоритма в том, что данные и мета информация о сжатии разнесены по двум бинарным файлам. Так же, алгоритм не классический, т.е. работает не на деревьях символов, а на стейт машине. Поэтому файл second.bin представляет из себя таблицу переходов для стейт машины, которая занимается разжатием теста. Однако, в коде этой стейт машины было допущено 2 логические ошибки, которые нужно было устранить, что бы она заработала как нужно. 
Ошибки: 

1. if (i == 2 && j == 3) continue; - вообще нужно убрать.

2. state = fsm[state].next[bit] ^ 0x11; - state нужно просто обнулить.